(this["webpackJsonpmovie-database-app"]=this["webpackJsonpmovie-database-app"]||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a(22)},,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),o=a.n(c),s=(a(14),a(3)),i=a(1),u=a.n(i),l=a(2),m=function(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")},d=function(e){return parseInt(e.replace("w",""),10)},p=a(5),f=a.n(p),v="6554896d71842b7abfa6aff16e17b669",h=function(e,t){var a,n,r;return u.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(a="__cache__".concat(e),n=f.a.get(a)){c.next=8;break}return c.next=5,u.a.awrap(fetch(e,t));case 5:r=c.sent,n=r.json(),f.a.put(a,n);case 8:return c.abrupt("return",n);case 9:case"end":return c.stop()}}))},b=function(e){var t,a,n,r=arguments;return u.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=r.length>1&&void 0!==r[1]?r[1]:{mode:"cors"},a=r.length>2?r[2]:void 0,c.prev=2,c.next=5,u.a.awrap(h(e,t));case 5:n=c.sent,c.next=11;break;case 8:return c.prev=8,c.t0=c.catch(2),c.abrupt("return",[]);case 11:return c.abrupt("return",a?n[a]:n);case 12:case"end":return c.stop()}}),null,null,[[2,8]])},g=function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e={api_key:v},t.abrupt("return",b("https://api.themoviedb.org/3/configuration?".concat(m(e))));case 2:case"end":return t.stop()}}))},y=function(){var e,t,a=arguments;return u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{},t=Object(s.a)({api_key:v,language:e.language||"en-US",sort_by:e.sort_by||"popularity.desc",include_adult:e.include_adult||!1,include_video:e.include_video||!0,page:e.page||"1"},e),n.abrupt("return",b("https://api.themoviedb.org/3/discover/movie?".concat(m(t)),void 0,"results"));case 3:case"end":return n.stop()}}))},E=function(){var e;return u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e={api_key:v},t.abrupt("return",b("https://api.themoviedb.org/3/genre/movie/list?".concat(m(e)),void 0,"genres"));case 2:case"end":return t.stop()}}))},w=function(e){var t,a,n=arguments;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=n.length>1&&void 0!==n[1]?n[1]:{},a=Object(s.a)({api_key:v,query:e,language:t.language||"en-US",sort_by:t.sort_by||"popularity.desc",include_adult:t.include_adult||!1},t),r.abrupt("return",b("https://api.themoviedb.org/3/search/movie?".concat(m(a)),void 0,"results"));case 3:case"end":return r.stop()}}))},x=function(e){var t,a,n,r=arguments;return u.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=r.length>1&&void 0!==r[1]?r[1]:5,a={api_key:v},c.next=4,u.a.awrap(b("https://api.themoviedb.org/3/movie/".concat(e,"/credits?").concat(m(a)),void 0,"cast"));case 4:return n=c.sent,c.abrupt("return",n.slice(0,t).sort((function(e,t){return e.cast_id-t.cast_id})));case 6:case"end":return c.stop()}}))},j={leftArrow:37,upArrow:38,rightArrow:39,downArrow:40},_=function(e){var t=e.setResults,a=e.setRanSearch,n=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var r=this,c=arguments;function o(){n||e.apply(r,c),t=null}t?clearTimeout(t):n&&e.apply(r,c),t=setTimeout(o,a)}}((function(e,n){var r,c;return u.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(r=e.trim(),!Object.values(j).some((function(e){return e===n}))){o.next=3;break}return o.abrupt("return");case 3:if(r){o.next=5;break}return o.abrupt("return");case 5:return o.next=7,u.a.awrap(w(e));case 7:c=o.sent,t(c),a(!0);case 10:case"end":return o.stop()}}))}),1e3);return r.a.createElement("input",{className:"form-control",onKeyUp:function(e){var t=e.target.value,a=e.keyCode;return n(t,a)},placeholder:"Search for a movie"})},O=(a(16),a(17),a(8)),S=Object(n.createContext)(),N=function(e){var t=e.config,a=e.children,n={config:t};return r.a.createElement(S.Provider,{value:n},a)};N.defaultProps={children:null,config:null};S.Consumer;var k=S,C=(a(18),function(e){var t=e.show,a=e.setShowDialog,c=e.selectedMovieId,o=e.movies,s=Object(n.useRef)(null),i=Object(n.useState)([]),m=Object(l.a)(i,2),p=m[0],f=m[1],v=Object(n.useContext)(k).config;Object(n.useEffect)((function(){O.a.registerDialog(s.current),s.current.addEventListener("close",(function(){a(!1)}))}),[a]),t&&s.current&&!s.current.hasAttribute("open")&&(s.current.showModal(),function(e){var t;u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.awrap(x(e));case 2:t=a.sent,f(t);case 4:case"end":return a.stop()}}))}(c));var h=function(){s.current.close()};return r.a.createElement("dialog",{id:"info-dialog",ref:s},function(e){var t=o.filter((function(t){return t.id===e}))[0];if(t){var a=t.poster_path,n=v.images.secure_base_url,c=function(e,t){for(var a=0;a<e.length;a++){var n=d(e[a]);if(Math.abs(t/2-n)<210)return n>500?"w".concat(500):e[a]}return e[0]}(v.images.poster_sizes,document.documentElement.clientWidth);return r.a.createElement("div",null,r.a.createElement("div",{className:"modal-header"},r.a.createElement("h3",null,t.title),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-hidden":"true",onClick:h},"\xd7")),r.a.createElement("div",{className:"modal-body clearfix"},r.a.createElement("img",{width:d(c),alt:t.title,src:"".concat(n).concat(c).concat(a),className:"modal-image float-right"}),r.a.createElement("h5",null,"Synopsis"),r.a.createElement("p",{className:"small"},t.overview||"No synopsis available"),r.a.createElement("h5",null,"Release date"),r.a.createElement("p",{className:"small"}," ",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{weekday:"long",year:"numeric",month:"long",day:"numeric",timeZone:"UTC"};return new Date(e).toLocaleDateString(t,a)}(t.release_date)),r.a.createElement("h5",null,"Starring:"),0===p.length&&r.a.createElement("p",{className:"small"},"No cast available"),r.a.createElement("ul",{className:"list-unstyled"},p.map((function(e){return r.a.createElement("li",{className:"small",key:"".concat(e.id,"_").concat(e.credit_id)},e.name," as ",e.character||"unspecified")})))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{className:"btn","data-dismiss":"alert","aria-hidden":"true",onClick:h},"Close")))}}(c))}),M=(a(19),function(e){var t=e.data,a=e.handleMovieItemClick,c=Object(n.useContext)(k).config,o=t.poster_path,s=c&&c.images.secure_base_url,i={w500:"1200px",w300:"992px",w185:"768px",w154:"402px"};return r.a.createElement("li",{className:"movie-item card border-primary",key:t.id,"data-movie-id":t.id,onClick:function(){return a(t.id)}},r.a.createElement("div",{className:"card-body"},c&&r.a.createElement("picture",null,Object.entries(i).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];return r.a.createElement("source",{key:"".concat(a,"_").concat(n),media:"(min-width: ".concat(n),srcSet:"".concat(s).concat(a).concat(o)})})),r.a.createElement("img",{src:"".concat(s,"w154").concat(o),alt:"".concat(t.title),width:"100%"})),r.a.createElement("span",{className:"d-block mt-2 small text-primary"},t.title),r.a.createElement("small",{className:"text-info"},t.release_date)))}),D=(a(20),function(e){var t=e.moviesData,a=e.setSelectedMovie,n=e.setShowDialog,c=function(e){a(e),n(!0)};return 0===t.length?r.a.createElement("div",{className:"alert alert-primary show fade",role:"alert"},"No results found."):r.a.createElement("ul",{className:"movie-list list-unstyled"},t.map((function(e){return r.a.createElement(M,{key:e.id,handleMovieItemClick:c,data:e})})))}),A=a(4),R=a.n(A),I=(a(21),function(e){var t=e.data,a=e.ranSearch,c=e.updateAfterGenreSelect,o=Object(n.useState)(!1),s=Object(l.a)(o,2),i=s[0],u=s[1];if(a)return null;var m=R()("btn btn-info btn-sm",{"d-none":i}),d=R()("bg-light ml-4 p-2 mb-3",{"pb-2":!i});return r.a.createElement("div",{className:d},r.a.createElement("h5",null,"Filter by Genre:"),r.a.createElement("ul",{className:"genre-list list-unstyled"},t.map((function(e,t){var a=R()("custom-control custom-checkbox",{"d-none":t>5&&!i});return r.a.createElement("li",{className:a,key:"genre_".concat(e.id,"_").concat(e.name)},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"genre-".concat(e.id),onChange:function(t){var a=t.target.checked;return c(a,e.id)}}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"genre-".concat(e.id)},e.name))}))),r.a.createElement("button",{onClick:function(){return u(!0)},className:m},"Show all"))}),U=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(-1),i=Object(l.a)(o,2),m=i[0],d=i[1],p=Object(n.useState)([]),f=Object(l.a)(p,2),v=f[0],h=f[1],b=Object(n.useState)({}),w=Object(l.a)(b,2),x=w[0],j=w[1],O=Object(n.useState)(!1),S=Object(l.a)(O,2),k=S[0],M=S[1],A=Object(n.useState)(!1),R=Object(l.a)(A,2),U=R[0],G=R[1],P=Object(n.useState)(null),T=Object(l.a)(P,2),F=T[0],J=T[1];Object(n.useEffect)((function(){u.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=J,e.next=3,u.a.awrap(g());case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}})),function(){var e,t;u.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=Object.entries(x).reduce((function(e,t){var a=Object(l.a)(t,2),n=a[0];return a[1]&&e.push(n),e}),[]).join(","),a.next=3,u.a.awrap(y({with_genres:e}));case 3:t=a.sent,c(t);case 5:case"end":return a.stop()}}))}(),function(){var e;u.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.awrap(E());case 2:e=t.sent,h(e.sort((function(e,t){return e.id-t.id})));case 4:case"end":return t.stop()}}))}()}),[x]);var L=U?"Search Results":"Popular Movies";return r.a.createElement(N,{config:F},r.a.createElement("div",{className:"App container"},r.a.createElement("header",null,r.a.createElement("h1",{className:"text-light"},"Moviely")),r.a.createElement(_,{setResults:c,setRanSearch:G}),r.a.createElement("h3",{className:"text-light mt-3 mb-3"},L),r.a.createElement(I,{data:v,ranSearch:U,updateAfterGenreSelect:function(e,t){j((function(a){return a[t]=e,Object(s.a)({},a)}))}}),r.a.createElement(D,{moviesData:a,setSelectedMovie:d,setShowDialog:M,tmdbConfig:F}),r.a.createElement(C,{show:k,movies:a,selectedMovieId:m,setShowDialog:M,resetSelectedMovie:function(){return M(!1)}})))};o.a.render(r.a.createElement(U,null),document.getElementById("root"))}],[[9,1,2]]]);
//# sourceMappingURL=main.9cc010b5.chunk.js.map